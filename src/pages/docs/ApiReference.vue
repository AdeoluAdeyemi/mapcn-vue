<script setup lang="ts">
import { computed } from 'vue'
import DocsSidebar from '@/components/DocsSidebar.vue'
import DocsToc from '@/components/DocsToc.vue'

const tocSections = [
  { id: 'why-mapcn', title: 'Why mapcn?' },
  { id: 'why-maplibre-directly', title: 'Why MapLibre Directly?' },
  { id: 'any-map-style', title: 'Any Map Style' },
  { id: 'usemap', title: 'useMap' },
  { id: 'mapcontrols', title: 'MapControls' },
  { id: 'mapmarker', title: 'MapMarker' },
  { id: 'markercontent', title: 'MarkerContent' },
  { id: 'markerpopup', title: 'MarkerPopup' },
  { id: 'markertooltip', title: 'MarkerTooltip' },
  { id: 'markerlabel', title: 'MarkerLabel' },
  { id: 'mappopup', title: 'MapPopup' },
  { id: 'maproute', title: 'MapRoute' },
  { id: 'mapclusterlayer', title: 'MapClusterLayer' }
]

const apiContent = computed(() => {
  return `<div class="mt-10 space-y-10"><div class="rounded-lg border bg-muted/40 px-4 py-3 text-[14px] leading-relaxed text-foreground/70 [&_strong]:text-foreground [&_strong]:font-medium"><strong>Note:</strong> This library is built on top of <a target="_blank" rel="noopener noreferrer" class="font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors" href="https://maplibre.org/maplibre-gl-js/docs/API/">MapLibre GL JS</a>. Most components extend the native MapLibre options. Refer to the <a target="_blank" rel="noopener noreferrer" class="font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors" href="https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/">MapLibre Map API</a> for additional options not listed here.</div><section class="space-y-4 scroll-mt-20" id="component-anatomy"><h2 class="text-xl font-semibold tracking-tight text-foreground">Component Anatomy</h2><div class="text-foreground/80 text-base sm:text-[15px] leading-7 space-y-3 [&_p]:leading-7 [&_ul]:list-disc [&_ul]:pl-5 [&_ul]:space-y-1.5 [&_ol]:list-decimal [&_ol]:pl-5 [&_ol]:space-y-1.5 [&_li]:leading-7 [&_strong]:text-foreground [&_strong]:font-medium [&_em]:text-muted-foreground"><p>All parts of the component that you can use and combine to build your map.</p><div class="w-full rounded-lg border overflow-hidden"><div class="p-4 overflow-auto text-sm bg-muted/20 [&_pre]:bg-transparent! [&_code]:bg-transparent!"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapMarker</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> longitude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">latitude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MarkerContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MarkerLabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MarkerContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MarkerPopup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MarkerTooltip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapMarker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapPopup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> longitude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">latitude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapControls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapRoute</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> coordinates</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">MapClusterLayer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre></div></div></div></section><section class="space-y-4 scroll-mt-20" id="map"><h2 class="text-xl font-semibold tracking-tight text-foreground">Map</h2><div class="text-foreground/80 text-base sm:text-[15px] leading-7 space-y-3 [&_p]:leading-7 [&_ul]:list-disc [&_ul]:pl-5 [&_ul]:space-y-1.5 [&_ol]:list-decimal [&_ol]:pl-5 [&_ol]:space-y-1.5 [&_li]:leading-7 [&_strong]:text-foreground [&_strong]:font-medium [&_em]:text-muted-foreground"><p>The root container component that initializes MapLibre GL and provides context to child components. Automatically handles theme switching between light and dark modes.</p><p>Extends <a target="_blank" rel="noopener noreferrer" class="font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors" href="https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/">MapOptions</a> from MapLibre GL (excluding <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">container</code> and <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">style</code>).</p><div class="rounded-lg border overflow-hidden my-6"><div data-slot="table-container" class="relative w-full overflow-x-auto"><table data-slot="table" class="w-full caption-bottom text-sm"><thead data-slot="table-header" class="[&_tr]:border-b"><tr data-slot="table-row" class="border-b transition-colors hover:bg-transparent bg-muted/30"><th data-slot="table-head" class="text-foreground text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] h-10 px-4 text-xs font-medium">Prop</th><th data-slot="table-head" class="text-foreground text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] h-10 px-4 text-xs font-medium">Type</th><th data-slot="table-head" class="text-foreground text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[ role=checkbox]]:translate-y-[2px] h-10 px-4 text-xs font-medium">Default</th><th data-slot="table-head" class="text-foreground text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] h-10 px-4 text-xs font-medium">Description</th></tr></thead><tbody data-slot="table-body" class="[&_tr:last-child]:border-0"><tr data-slot="table-row" class="border-b transition-colors"><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-[13px]">children</code></td><td data-slot="table-cell" class="p-2 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top whitespace-normal"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground">VNode | Component</code></td><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground whitespace-normal">—</code></td><td data-slot="table-cell" class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 text-sm text-foreground/70 whitespace-normal min-w-[180px] leading-relaxed">Child components (markers, popups, controls, routes).</td></tr><tr data-slot="table-row" class="border-b transition-colors"><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-[13px]">styles</code></td><td data-slot="table-cell" class="p-2 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top whitespace-normal"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground">{ light?: string | StyleSpecification; dark?: string | StyleSpecification }</code></td><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground whitespace-normal">—</code></td><td data-slot="table-cell" class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 text-sm text-foreground/70 whitespace-normal min-w-[180px] leading-relaxed">Custom map styles for light and dark themes. Overrides the default Carto base map tiles.</td></tr><tr data-slot="table-row" class="border-b transition-colors"><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-[13px]">projection</code></td><td data-slot="table-cell" class="p-2 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top whitespace-normal"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground">ProjectionSpecification</code></td><td data-slot="table-cell" class="p-2 whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 align-top"><code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs text-muted-foreground whitespace-normal">—</code></td><td data-slot="table-cell" class="p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] px-4 py-3 text-sm text-foreground/70 whitespace-normal min-w-[180px] leading-relaxed">Map projection type. Use { type: "globe" } for 3D globe view.</td></tr></tbody></table></div></div></div></section><section class="space-y-4 scroll-mt-20" id="usemap"><h2 class="text-xl font-semibold tracking-tight text-foreground">useMap</h2><div class="text-foreground/80 text-base sm:text-[15px] leading-7 space-y-3 [&_p]:leading-7 [&_ul]:list-disc [&_ul]:pl-5 [&_ul]:space-y-1.5 [&_ol]:list-decimal [&_ol]:pl-5 [&_ol]:space-y-1.5 [&_li]:leading-7 [&_strong]:text-foreground [&_strong]:font-medium [&_em]:text-muted-foreground"><p>A hook that provides access to the MapLibre map instance and loading state. Must be used within a <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">Map</code> component.</p><div class="w-full rounded-lg border overflow-hidden"><div class="p-4 overflow-auto text-sm bg-muted/20 [&_pre]:bg-transparent! [&_code]:bg-transparent!"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">isLoaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> useMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span></code></pre></div></div><p>Returns <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">map</code> (<a target="_blank" rel="noopener noreferrer" class="font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors" href="https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/">MapLibre.Map</a>) and <code class="relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm">isLoaded</code> (boolean) tells you if the map is loaded and ready to use.</p></div></section></div>`
})
</script>

<template>
  <div class="flex">
    <DocsSidebar />
    <div class="container py-12 flex-1">
      <div class="mx-auto max-w-3xl">
        <div class="space-y-2">
          <h1 class="text-3xl font-semibold tracking-tight text-foreground">API Reference</h1>
          <p class="text-base text-muted-foreground leading-relaxed">Complete API documentation for all map components.</p>
        </div>
        
        <div v-html="apiContent"></div>

        <div class="flex items-center justify-between gap-4 mt-14 pt-8 border-t">
          <router-link to="/docs/advanced-usage" class="group flex flex-col items-start gap-1.5">
            <span class="text-xs text-muted-foreground">Previous</span>
            <span class="text-sm font-medium group-hover:underline underline-offset-4">Advanced Usage</span>
          </router-link>
          <router-link to="/docs/installation" class="group flex flex-col items-end gap-1.5">
            <span class="text-xs text-muted-foreground">Next</span>
            <span class="text-sm font-medium group-hover:underline underline-offset-4">Installation</span>
          </router-link>
        </div>
      </div>
    </div>
    <DocsToc :sections="tocSections" />
  </div>
</template>
